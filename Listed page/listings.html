<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listings | Lost & Found</title>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      min-height: 100vh;
      background-color: #f8f9fc;
    }

    /* Dashboard Container */
    .dashboard-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: linear-gradient(180deg, #1e40af 0%, #1e3a8a 100%);
      color: white;
      padding: 20px 0;
      height: 100vh;
      position: sticky;
      top: 0;
      box-shadow: 5px 0 15px rgba(0,0,0,0.1);
    }
    
    .sidebar-header {
      text-align: center;
      padding: 0 20px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    
    .profile-img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid rgba(255,255,255,0.2);
      margin-bottom: 15px;
    }
    
    .sidebar-header h3 {
      margin: 5px 0;
      font-size: 18px;
      font-weight: 500;
    }
    
    .sidebar-header p {
      font-size: 12px;
      opacity: 0.8;
      margin: 0;
      font-weight: 300;
    }
    
    .sidebar-nav ul {
      list-style: none;
      padding: 0 15px;
    }
    
    .sidebar-nav li {
      margin-bottom: 5px;
    }
    
    .sidebar-nav a {
      color: rgba(255,255,255,0.8);
      text-decoration: none;
      display: block;
      padding: 10px 15px;
      border-radius: 5px;
      transition: all 0.3s;
      font-size: 14px;
      font-weight: 400;
    }
    
    .sidebar-nav a:hover {
      background: rgba(255,255,255,0.1);
      color: white;
    }
    
    .sidebar-nav a.active {
      background: rgba(255,255,255,0.2);
      color: white;
    }
    
    .sidebar-nav i {
      width: 25px;
      text-align: center;
      margin-right: 5px;
      font-size: 16px;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 30px;
      background-color: #f8f9fc;
    }
    
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .page-title {
      font-size: 24px;
      color: #2d3748;
      font-weight: 600;
    }
    
    /* Search Bar */
    .search-bar {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .search-bar input {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 20px;
      outline: none;
      font-size: 14px;
      width: 200px;
      transition: all 0.3s;
    }
    
    .search-bar input:focus {
      border-color: #4e73df;
      box-shadow: 0 0 5px rgba(78, 115, 223, 0.5);
    }
    
    .search-bar button {
      background-color: #4e73df;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s;
    }
    
    .search-bar button:hover {
      background-color: #3b65d6;
    }
    
    /* Filter Controls */
    .filter-controls {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 30px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
    }
    
    .filter-btn {
      padding: 8px 20px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .filter-btn.active {
      background: #4e73df;
      color: white;
    }
    
    .filter-btn.inactive {
      background: #e9ecef;
      color: #495057;
    }
    
    /* Sort Dropdown */
    .sort-dropdown {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .sort-dropdown label {
      font-size: 14px;
      color: #495057;
    }
    
    .sort-dropdown select {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      background-color: white;
      cursor: pointer;
    }
    
    /* Listings Grid */
    .listings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .listing-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58,59,69,0.1);
      transition: transform 0.3s;
    }
    
    .listing-card:hover {
      transform: translateY(-5px);
    }
    
    .listing-img {
      height: 200px;
      background-size: cover;
      background-position: center;
    }
    
    .listing-details {
      padding: 20px;
    }
    
    .listing-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 10px;
    }
    
    .status-lost {
      background: #fee2e2;
      color: #b91c1c;
    }
    
    .status-found {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-returned {
      background: #dbeafe;
      color: #1e40af;
    }
    
    .listing-title {
      font-size: 18px;
      margin-bottom: 8px;
      color: #2d3748;
    }
    
    .listing-location, .listing-date {
      display: flex;
      align-items: center;
      color: #64748b;
      font-size: 14px;
      margin-bottom: 8px;
    }
    
    .listing-location i, .listing-date i {
      margin-right: 8px;
    }
    
    .view-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 8px 16px;
      background: #4e73df;
      color: white;
      border-radius: 4px;
      text-decoration: none;
      font-size: 14px;
      transition: background 0.3s;
    }
    
    .view-btn:hover {
      background: #3b65d6;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .dashboard-container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
      
      .filter-controls {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="https://images.unsplash.com/photo-1531427186611-ecfd6d936c79?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cHJvZmlsZSUyMHBpY3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=200&q=60" 
             alt="User Profile" class="profile-img">
        <h3>John Doe</h3>
        <p>Member since June 2023</p>
      </div>
      
      <nav class="sidebar-nav">
        <ul class="sidebar-menu">
          <li><a href="../dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
          <li><a href="listings.html"><i class="fas fa-search"></i> Search Items</a></li>
          <li><a href="listings.html?filter=lost"><i class="fas fa-question-circle"></i> Lost Items</a></li>
          <li><a href="listings.html?filter=found"><i class="fas fa-check-circle"></i> Found Items</a></li>
          <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
          <li><a href="../userprofile.html" class="active"><i class="fas fa-user"></i> My Profile</a></li>
          <li><a href="../about.html"><i class="fas fa-cog"></i> About Us</a></li>
          <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
      </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="dashboard-header">
        <h1 class="page-title"><i class="fas fa-list"></i> Listings</h1>
        <div class="search-bar">
          <input type="text" id="search-input" placeholder="Search items..." />
          <button id="search-btn"><i class="fas fa-search"></i></button>
        </div>
      </header>
      
      <!-- Filter Controls -->
      <div class="filter-controls">
        <button class="filter-btn active" id="all-btn">All Items</button>
        <button class="filter-btn inactive" id="lost-btn">Lost Items</button>
        <button class="filter-btn inactive" id="found-btn">Found Items</button>

        <!-- Sort Dropdown -->
        <div class="sort-dropdown">
          <label for="sort-select">Sort by:</label>
          <select id="sort-select">
            <option value="date-desc">Date (Newest)</option>
            <option value="date-asc">Date (Oldest)</option>
            <option value="title-asc">Title (A-Z)</option>
            <option value="title-desc">Title (Z-A)</option>
          </select>
        </div>
      </div>
      
      <!-- Listings Grid -->
      <div class="listings-grid" id="listings-container">
        <!-- Listing cards will be populated here -->
      </div>
    </main>
  </div>

  <script>
    // Sample data for listings
    const listings = [
      {
        id: 1,
        title: "Lost Wallet",
        description: "Black leather wallet with credit cards inside",
        image: "https://i.pinimg.com/736x/65/36/a4/6536a4fd58a8caccc905733477fcfc0d.jpg",
        location: "Tesla Block",
        date: "2023-06-15",
        status: "lost",
        type: "lost"
      },
      {
        id: 2,
        title: "Found iPhone",
        description: "iPhone 12 with blue case",
        image: "https://i.pinimg.com/736x/c2/0f/2a/c20f2a16bd32dbb321041bc2477818e7.jpg",
        location: "Square One",
        date: "2023-06-10",
        status: "found",
        type: "found"
      },
      {
        id: 3,
        title: "Lost Keys",
        description: "Set of car and house keys",
        image: "https://bettystreff.com/wp-content/uploads/2017/07/keys.jpg",
        location: "Main Entrance",
        date: "2023-06-05",
        status: "lost",
        type: "lost"
      },
      {
        id: 4,
        title: "Found Watch",
        description: "Silver wristwatch near the fountain",
        image: "https://i.ebayimg.com/images/g/TnIAAOSwqeRlPVxr/s-l400.jpg",
        location: "Fountain",
        date: "2023-05-28",
        status: "found",
        type: "found"
      },
      {
        id: 5,
        title: "Lost Backpack",
        description: "Blue backpack with laptop inside",
        image: "https://i.ebayimg.com/images/g/FKAAAOSwonJmgzIQ/s-l400.jpg",
        location: "University Library",
        date: "2023-05-20",
        status: "returned",
        type: "lost"
      },
      {
        id: 6,
        title: "Found Sunglasses",
        description: "Rayban aviator sunglasses",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSngiB-L4wa7pS0e94IZCZVrXmRIhNvQP7hTqD-olzwUfl-Lkt_JnfLUpbH_Wf5LXvdvDU&usqp=CAU",
        location: "Parking lot",
        date: "2023-05-15",
        status: "found",
        type: "found"
      },
      {
        id: 7,
        title: "Lost Glasses",
        description: "Pair of black-rimmed glasses.",
        image: "https://i.ebayimg.com/00/s/MTIwMFgxNjAw/z/eIkAAOSwvy5lGkde/$_12.JPG?set_id=880000500F",
        location: "Alpha zone",
        date: "2023-05-12",
        status: "lost",
        type: "lost"
      },
      {
        id: 8,
        title: "Found Umbrella",
        description: "Blue umbrella found at the bus stop.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS1LBQLdpth2JrMLn8qERRqygj1eMvaBjNN7A&s",
        location: "Bus Stop",
        date: "2023-05-10",
        status: "found",
        type: "found"
      },
      {
        id: 9,
        title: "Found Book",
        description: "Hardcover book titled 'The Great Gatsby' found in the library.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLJ9Rlz5DpA8MXu16gzvgLUiNiyPQJpbNBOA&s",
        location: "Library",
        date: "2023-05-08",
        status: "found",
        type: "found"
      },
      {
        id: 10,
        title: "Lost Headphones",
        description: "Black wireless headphones.",
        image: "https://di2ponv0v5otw.cloudfront.net/posts/2022/09/29/633659ff2fbf1a30e994223a/m_63365a177dfcc28e8bb48156.jpg",
        location: "Near boys hostel",
        date: "2023-05-05",
        status: "lost",
        type: "lost"
      },
      {
        id: 11,
        title: "Found Ring",
        description: "Gold ring with a diamond.",
        image: "https://shop.kenanddanadesign.com/cdn/shop/products/IMG_1381_7ba77f24-c6f5-4e84-8999-64151428d647.jpg?v=1733934429&width=1946",
        location: "flameing block",
        date: "2023-05-02",
        status: "found",
        type: "found"
      },
      {
        id: 12,
        title: "Lost Phone Charger",
        description: "Black phone charger found in the library.",
        image: "",
        location: "Library",
        date: "2023-05-01",
        status: "lost",
        type: "lost"
      },
      {
        id: 13,
        title: "Found Scarf",
        description: "Red scarf found at the pythagroes block.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTkp0-RcbdkWP1WuyBrh116DqMQFdsvaCUezg&s",
        location: "Pythagroes block",
        date: "2023-04-30",
        status: "found",
        type: "found"
      },
      {
        id: 14,
        title: "Lost Camera",
        description: "Digital camera with a black case.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-LDQ81d2sXwAeAOZxevtOA4vs3aWQAh_dIgscBUiBCCLjOK6V38lQJlWJ7JZvzXAWFEY&usqp=CAU",
        location: "Omega zone",
        date: "2023-04-28",
        status: "lost",
        type: "lost"
      },
      {
        id: 15,
        title: "Found locket",
        description: "Silver locket with a heart pendant.",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2t18BKLiE0Ix5WGqc6SCfW6xHaLZ_B36QYwDYJOvl4bE7P8UTVltb762rdTIrIiXWS5E&usqp=CAU",
        location: "Square one",
        date: "2023-04-25",
        status: "found",
        type: "found"
      }
    ];

    // DOM Elements
    const listingsContainer = document.getElementById('listings-container');
    const allBtn = document.getElementById('all-btn');
    const lostBtn = document.getElementById('lost-btn');
    const foundBtn = document.getElementById('found-btn');

    // Current filter state
    let currentFilter = 'all';

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      renderListings();
      setupFilterButtons();
      
      // Check URL parameters for filter
      const urlParams = new URLSearchParams(window.location.search);
      const filter = urlParams.get('filter');
      
      if (filter === 'lost' || filter === 'found') {
        setActiveFilter(filter);
        updateSidebarActiveState(filter);
      } else {
        setActiveFilter('all');
        updateSidebarActiveState('all');
      }
    });

    // Render listings based on current filter
    function renderListings() {
      listingsContainer.innerHTML = '';
      
      const filteredListings = listings.filter(listing => {
        if (currentFilter === 'all') return true;
        return listing.type === currentFilter;
      });
      
      if (filteredListings.length === 0) {
        listingsContainer.innerHTML = '<p>No items found matching your criteria.</p>';
        return;
      }
      
      filteredListings.forEach(listing => {
        const listingCard = createListingCard(listing);
        listingsContainer.appendChild(listingCard);
      });
    }

    // Create a listing card element
    function createListingCard(listing) {
      const card = document.createElement('div');
      card.className = 'listing-card';
      
      // Determine status class and text
      let statusClass, statusText;
      if (listing.status === 'lost') {
        statusClass = 'status-lost';
        statusText = 'Lost';
      } else if (listing.status === 'found') {
        statusClass = 'status-found';
        statusText = 'Found';
      } else {
        statusClass = 'status-returned';
        statusText = 'Returned';
      }
      
      card.innerHTML = `
        <div class="listing-img" style="background-image: url('${listing.image}')"></div>
        <div class="listing-details">
          <span class="listing-status ${statusClass}">${statusText}</span>
          <h3 class="listing-title">${listing.title}</h3>
          <p>${listing.description}</p>
          <div class="listing-location">
            <i class="fas fa-map-marker-alt"></i>
            <span>${listing.location}</span>
          </div>
          <div class="listing-date">
            <i class="far fa-calendar-alt"></i>
            <span>${formatDate(listing.date)}</span>
          </div>
          <a href="listing-detail.html?id=${listing.id}" class="view-btn">View Details</a>
        </div>
      `;
      
      return card;
    }

    // Format date
    function formatDate(dateString) {
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return new Date(dateString).toLocaleDateString(undefined, options);
    }

    // Set up filter button event listeners
    function setupFilterButtons() {
      allBtn.addEventListener('click', () => {
        setActiveFilter('all');
        updateSidebarActiveState('all');
      });
      lostBtn.addEventListener('click', () => {
        setActiveFilter('lost');
        updateSidebarActiveState('lost');
      });
      foundBtn.addEventListener('click', () => {
        setActiveFilter('found');
        updateSidebarActiveState('found');
      });
    }

    // Set the active filter and update UI
    function setActiveFilter(filter) {
      currentFilter = filter;
      
      // Update button states
      allBtn.className = filter === 'all' ? 'filter-btn active' : 'filter-btn inactive';
      lostBtn.className = filter === 'lost' ? 'filter-btn active' : 'filter-btn inactive';
      foundBtn.className = filter === 'found' ? 'filter-btn active' : 'filter-btn inactive';
      
      // Update URL without reloading
      const url = new URL(window.location);
      if (filter === 'all') {
        url.searchParams.delete('filter');
      } else {
        url.searchParams.set('filter', filter);
      }
      window.history.pushState({}, '', url);
      
      // Re-render listings
      renderListings();
    }

    // Update sidebar active state based on filter
    function updateSidebarActiveState(filter) {
      const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
      
      // Remove active class from all links first
      sidebarLinks.forEach(link => {
        link.classList.remove('active');
      });
      
      // Set active class based on filter
      if (filter === 'lost') {
        document.querySelector('.sidebar-nav a[href*="filter=lost"]').classList.add('active');
      } else if (filter === 'found') {
        document.querySelector('.sidebar-nav a[href*="filter=found"]').classList.add('active');
      } else {
        document.querySelector('.sidebar-nav a[href*="listings.html"]').classList.add('active');
      }
    }

    // Add search functionality
    document.getElementById('search-btn').addEventListener('click', () => {
      const query = document.getElementById('search-input').value.toLowerCase();
      filterListingsBySearch(query);
    });

    document.getElementById('search-input').addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      filterListingsBySearch(query);
    });

    function filterListingsBySearch(query) {
      const filteredListings = listings.filter(listing =>
        listing.title.toLowerCase().includes(query) ||
        listing.description.toLowerCase().includes(query) ||
        listing.location.toLowerCase().includes(query)
      );

      listingsContainer.innerHTML = '';

      if (filteredListings.length === 0) {
        listingsContainer.innerHTML = '<p>No items found matching your search.</p>';
        return;
      }

      filteredListings.forEach(listing => {
        const listingCard = createListingCard(listing);
        listingsContainer.appendChild(listingCard);
      });
    }

    // Add sort functionality
    document.getElementById('sort-select').addEventListener('change', (e) => {
      const sortValue = e.target.value;

      if (sortValue === 'date-desc') {
        listings.sort((a, b) => new Date(b.date) - new Date(a.date));
      } else if (sortValue === 'date-asc') {
        listings.sort((a, b) => new Date(a.date) - new Date(b.date));
      } else if (sortValue === 'title-asc') {
        listings.sort((a, b) => a.title.localeCompare(b.title));
      } else if (sortValue === 'title-desc') {
        listings.sort((a, b) => b.title.localeCompare(a.title));
      }

      renderListings();
    });
  </script>
</body>
</html>